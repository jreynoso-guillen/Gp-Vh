<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>           
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
            </f:facet>
        </h:head>
        <h:body   >
            <ui:composition template="./Templates/vehiculosTemplate.xhtml">
                <ui:define name="Content">
                
            

                    <!-- *******************************TU CODIGO AQUI. NO MOVER LO DEMAS.******************************************** --> 
                    <br/>
                        <h:form id="formVh">
                            <p:commandButton id="btnEm" update=":formVh1" oncomplete="PF('tablaDialog').show()"  value="Nueva" actionListener="#{vehiculosBackBean.agregarNuevoVh}"/>
                            <p:dataTable value="#{vehiculosBackBean.listaVh}" var="e" id="singleDT" emptyMessage="No hay registros para mostrar"
                                         selectionMode="single" rowKey="#{e.id}"  
                                         rows="20" paginator="true" scrollable="true" scrollWidth="95%" style="font-size: 16px !important;"
                                         
                                         >
                                <f:facet name="header">
                                    Vehiculos afiliados a Gps-Tracker
                                    <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                    <p:columnToggler datasource="singleDT" trigger="toggler" />
                                </f:facet>
                                <p:column headerText="Id" width="30">
                                    <h:outputText value="#{e.id}"/>
                                </p:column>
                                <p:column headerText="Nombre" filterBy="#{e.nombre}" width="300" filterMatchMode="contains" >
                                    <h:outputText value="#{e.nombre}"/>
                                </p:column>
                                <p:column headerText="Fecha Alta"  width="250">
                                    <h:outputText value="#{e.fechaAlta}">
                                        <f:convertDateTime pattern="dd-MM-yyyy " />
                                    </h:outputText>
                                    
                                </p:column>
                                <p:column headerText="Plataforma" width="200">
                                    <h:outputText value="#{e.plataforma}"/>
                                </p:column>
                                <p:column headerText="IMEI" width="200">
                                    <h:outputText value="#{e.IMEI}"/>
                                </p:column>
                                <p:column headerText="No Telefonico" width="200">
                                    <h:outputText value="#{e.numeroTelefono}"/>
                                </p:column>
                                <p:column headerText="Clave" width="200">
                                    <h:outputText value="#{e.clave}"/>
                                </p:column>
                                <p:column headerText="Saldo" width="200">
                                    <p:inputText value="#{e.saldo}"/>
                                </p:column>
                                <p:column headerText="Fecha Vencimiento" filterBy="#{e.fechaVenceS}" filterMatchMode="contains" width="250">
                                    <p:calendar value="#{e.fechaVence}" showOn="button"/>
                                </p:column>
                                <p:column headerText="Tipo de cobro" width="200">
                                    <h:outputText value="#{e.tipoCobro}"/>
                                </p:column>
                                <p:column headerText="Cuenta Telcel" width="200">
                                    <h:outputText value="#{e.cuenta}"/>
                                </p:column>
                                <p:column headerText="Marca" width="200">
                                    <h:outputText value="#{e.marca}"/>
                                </p:column>
                                <p:column headerText="Modelo" width="200">
                                    <h:outputText value="#{e.modelo}"/>
                                </p:column>
                                <p:column headerText="AÃ±o" width="200">
                                    <h:outputText value="#{e.an}"/>
                                </p:column>
                                <p:column headerText="Placa" width="200">
                                    <h:outputText value="#{e.placa}"/>
                                </p:column>
                                <p:column headerText="Serie" width="200">
                                    <h:outputText value="#{e.serie}"/>
                                </p:column>
                                
                                <p:column headerText="Motor" width="200">
                                    <h:outputText value="#{e.motor}"/>
                                </p:column>
                                <p:column headerText="Activo" width="200" ><center>
                                    <p:selectBooleanCheckbox value="#{e.status}" style="border: 0px !important;"/></center>
                                </p:column>
                                <p:column headerText="Empresa" width="200">
                                    <p:selectOneMenu id="somE" value="#{e.empresa}" >
                                        <f:selectItems  value="#{vehiculosBackBean.listaEmpresas}" var="vh" itemLabel="#{vh.nombre}" itemValue="#{vh.id}"/>
                                    </p:selectOneMenu>
                                </p:column>
                                <p:column headerText="Guardar" width="200">
                                    <p:commandButton value="Guardar" actionListener="#{vehiculosBackBean.modificaVh(e)}"/>
                                </p:column>
                                
                            </p:dataTable>
                        </h:form>
                    
                    <p:dialog header="Datos del Vehiculo" widgetVar="tablaDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false" style="position: fixed !important;">
                        <h:form id="formVh1">
                            <p:panelGrid columns="2">


                            </p:panelGrid>
                            <p:commandButton value="Agregar"  oncomplete="PF('tablaDialog').hide()" update=":formVh"/>
                        </h:form>
                    </p:dialog>
                    
                    
                    <p:dialog header="Datos de la empresa" widgetVar="tablaDialog2" modal="true" showEffect="fade" hideEffect="fade" resizable="false" style="position: fixed !important;">
                        <h:form id="formVh2">
                            <p:panelGrid columns="2">
                                <p:outputLabel value="Nombre Empresa"/>
                                <p:outputLabel value="#{vehiculosBackBean.empTemp.nombreempresa}"/>

                            </p:panelGrid>
                        </h:form>
                    </p:dialog>
                    <!-- ************************************************************************************************************* --> 
            
                </ui:define>
            </ui:composition>    
        </h:body>
    </f:view>
</html>

